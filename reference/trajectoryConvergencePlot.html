<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Summary plot for trajectory convergence and divergence — trajectoryConvergencePlot • ecotraj</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Summary plot for trajectory convergence and divergence — trajectoryConvergencePlot"><meta name="description" content="Provides plots to represent trajectory convergence and divergence tests performed by the function trajectoryConvergence or to present the results of Relative Trajectory Movement Assessment (trajectoryRMA)."><meta property="og:description" content="Provides plots to represent trajectory convergence and divergence tests performed by the function trajectoryConvergence or to present the results of Relative Trajectory Movement Assessment (trajectoryRMA)."><meta property="og:image" content="https://emf-creaf.github.io/ecotraj/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ecotraj</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><h6 class="dropdown-header" data-toc-skip>Ecological Trajectory Analysis</h6></li>
    <li><a class="dropdown-item" href="../articles/IntroductionETA.html">Introduction to Ecological Trajectory Analysis (ETA)</a></li>
    <li><a class="dropdown-item" href="../articles/TransformingTrajectories.html">Transforming trajectories</a></li>
    <li><a class="dropdown-item" href="../articles/TrajectoryDistanceMetrics.html">Distance metrics for trajectory resemblance</a></li>
    <li><a class="dropdown-item" href="../articles/Dissimilarities.html">Dissimilarities in community data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Stable Isotope Trajectory Analysis</h6></li>
    <li><a class="dropdown-item" href="../articles/SITA.html">Introduction to Stable Isotope Trajectory Analysis (SITA)</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Cyclical Ecological Trajectory Analysis</h6></li>
    <li><a class="dropdown-item" href="../articles/IntroductionCETA.html">Introduction to Cyclical Ecological Trajectory Analysis (CETA)</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Ecological Quality Assessment</h6></li>
    <li><a class="dropdown-item" href="../articles/IntroductionEQA.html">Introduction to Ecological Quality Assessment (EQA)</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/emf-creaf/ecotraj/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Summary plot for trajectory convergence and divergence</h1>
      <small class="dont-index">Source: <a href="https://github.com/emf-creaf/ecotraj/blob/HEAD/R/trajectoryConvergencePlot.R" class="external-link"><code>R/trajectoryConvergencePlot.R</code></a></small>
      <div class="d-none name"><code>trajectoryConvergencePlot.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Provides plots to represent trajectory convergence and divergence tests performed by the function <code><a href="trajectoryComparison.html">trajectoryConvergence</a></code> or to present the results of Relative Trajectory Movement Assessment (<code><a href="trajectoryRMA.html">trajectoryRMA</a></code>).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">trajectoryConvergencePlot</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"pairwise.asymmetric"</span>,</span>
<span>  alpha.filter <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  traj.colors <span class="op">=</span> <span class="st">"grey"</span>,</span>
<span>  traj.names <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  traj.names.colors <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  radius <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  conv.color <span class="op">=</span> <span class="st">"red"</span>,</span>
<span>  div.color <span class="op">=</span> <span class="st">"blue"</span>,</span>
<span>  half.arrows.size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  tau.links.transp <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>  top <span class="op">=</span> <span class="st">"between"</span>,</span>
<span>  pointy <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  add <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>An object of class <code><a href="defineTrajectories.html">trajectories</a></code>. Alternatively, an object of class <code><a href="trajectoryRMA.html">RTMA</a></code>.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>A string indicating the convergence test to be displayed, either <code>"pairwise.asymmetric"</code>, <code>"pairwise.symmetric"</code> or <code>"both"</code> (see <code><a href="trajectoryComparison.html">trajectoryConvergence</a></code>). Disregarded if <code>inherits(x,"RTMA")</code>.</p></dd>


<dt id="arg-alpha-filter">alpha.filter<a class="anchor" aria-label="anchor" href="#arg-alpha-filter"></a></dt>
<dd><p>The minimum p-value for a link to be drawn (see <code><a href="trajectoryComparison.html">trajectoryConvergence</a></code>). Defaults to <code>NULL</code> (all links drawn). Disregarded if <code>inherits(x,"RTMA")</code> (the RTMA corrected alpha level is used instead).</p></dd>


<dt id="arg-traj-colors">traj.colors<a class="anchor" aria-label="anchor" href="#arg-traj-colors"></a></dt>
<dd><p>The colors for the trajectories (circles). Defaults to <code>"grey"</code>.</p></dd>


<dt id="arg-traj-names">traj.names<a class="anchor" aria-label="anchor" href="#arg-traj-names"></a></dt>
<dd><p>The names of trajectories. Defaults to the names provided in <code>x</code>.</p></dd>


<dt id="arg-traj-names-colors">traj.names.colors<a class="anchor" aria-label="anchor" href="#arg-traj-names-colors"></a></dt>
<dd><p>The color of the names of trajectories on the circles. Defaults to <code>"black"</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional parameters passed to <code><a href="https://rdrr.io/r/graphics/polygon.html" class="external-link">polygon</a></code> to personalize the circles representing trajectories.</p></dd>


<dt id="arg-radius">radius<a class="anchor" aria-label="anchor" href="#arg-radius"></a></dt>
<dd><p>The radius of the circles representing trajectories. Defaults to <code>1</code>.</p></dd>


<dt id="arg-conv-color">conv.color<a class="anchor" aria-label="anchor" href="#arg-conv-color"></a></dt>
<dd><p>The color used to mark convergent trajectories. Defaults to <code>"red"</code>.</p></dd>


<dt id="arg-div-color">div.color<a class="anchor" aria-label="anchor" href="#arg-div-color"></a></dt>
<dd><p>The color used to mark divergent trajectories. Defaults to <code>"blue"</code>.</p></dd>


<dt id="arg-half-arrows-size">half.arrows.size<a class="anchor" aria-label="anchor" href="#arg-half-arrows-size"></a></dt>
<dd><p>A multiplication coefficient for the size of the arrow heads when representing asymmetric tests results. Defaults to <code>1</code>.</p></dd>


<dt id="arg-tau-links-transp">tau.links.transp<a class="anchor" aria-label="anchor" href="#arg-tau-links-transp"></a></dt>
<dd><p>The transparency of the links representing the tau statistic of the Mann-Kendall test (see <code><a href="trajectoryComparison.html">trajectoryConvergence</a></code>).</p></dd>


<dt id="arg-top">top<a class="anchor" aria-label="anchor" href="#arg-top"></a></dt>
<dd><p>A string indicating if the top of the plotting area should contain a circle representing a trajectory (<code>"circle"</code>), or should be in between two circles (<code>"between"</code>). Defaults to <code>"between"</code>.</p></dd>


<dt id="arg-pointy">pointy<a class="anchor" aria-label="anchor" href="#arg-pointy"></a></dt>
<dd><p>Boolean. Should the circles representing trajectories be made pointy (i.e. pointing to the next trajectory)? Useful when trajectories have some order, as in the context of CETA to represent fixed date trajectories (see <code><a href="trajectoryCyclical.html">trajectoryCyclical</a></code>).</p></dd>


<dt id="arg-add">add<a class="anchor" aria-label="anchor" href="#arg-add"></a></dt>
<dd><p>Passed to function <code><a href="trajectoryComparison.html">trajectoryConvergence</a></code>. Flag to indicate that constant values should be added (local transformation) to correct triplets of distance values that do not fulfill the triangle inequality. Disregarded if <code>inherits(x,"RTMA")</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Function <code>trajectoryConvergencePlot</code> provides ways to visualize pairwise convergence and divergence between trajectories.
It has two modes of functioning:</p><ul><li><p>If <code>x</code> is of class <code><a href="defineTrajectories.html">trajectories</a></code>, the function will display the results of convergence/divergence tests by calls to function <code><a href="trajectoryComparison.html">trajectoryConvergence</a></code>.</p></li>
<li><p>If <code>x</code> is of class <code><a href="trajectoryRMA.html">RTMA</a></code>,the function will display the results of convergence/divergence tests and dynamic correspondence tests stored in the <code><a href="trajectoryRMA.html">RTMA</a></code> object supplied.</p></li>
</ul><p>In the plots, trajectories are represented by circles. The convergence or divergence between pairs of trajectories are represented by links. If convergence tests are symmetric, the links are simple. If the convergence tests are asymmetric, the links are displayed as half arrows pointing from the trajectory converging or diverging towards the trajectory being approached or diverged from.
The width and color hue of the links are proportional to the tau statistic of the Mann-Kendall test performed by the <code><a href="trajectoryComparison.html">trajectoryConvergence</a></code> function.
Function <code>trajectoryConvergencePlot</code> also offers the possibility to plot both tests at the same time.</p>
<p>If <code>x</code> is of class <code><a href="trajectoryRMA.html">RTMA</a></code>, <code>trajectoryConvergencePlot</code> will display both convergence tests as explained above, as well as cases of parallelism recognized in <code><a href="trajectoryRMA.html">trajectoryRMA</a></code>.
<code>Parallel</code> scenarios are indicated by two full parallel black lines linking two trajectories, while in case of <code>Antiparallel</code> scenarios one of the lines is dotted.</p>
<p>In addition, see function <code><a href="cycleShiftArrows.html">cycleShiftArrows</a></code> for additional graphical elements to be displayed when conducting CETA.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Djeghri et al. (under review) Uncovering the relative movements of ecological trajectories.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="trajectoryComparison.html">trajectoryConvergence</a></code>,<code><a href="trajectoryRMA.html">trajectoryRMA</a></code>, <code><a href="cycleShiftArrows.html">cycleShiftArrows</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Nicolas Djeghri, UBO</p>
<p>Miquel De Cáceres, CREAF</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"avoca"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">avoca_D_man</span> <span class="op">&lt;-</span> <span class="fu">vegclust</span><span class="fu">::</span><span class="fu"><a href="https://emf-creaf.github.io/vegclust/reference/vegdiststruct.html" class="external-link">vegdiststruct</a></span><span class="op">(</span><span class="va">avoca_strat</span>, </span></span>
<span class="r-in"><span>                                       method <span class="op">=</span><span class="st">"manhattan"</span>, </span></span>
<span class="r-in"><span>                                       transform <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">x</span><span class="op">+</span><span class="fl">1</span><span class="op">)</span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">years</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1971</span>, <span class="fl">1974</span>, <span class="fl">1978</span>, <span class="fl">1983</span>, <span class="fl">1987</span>, <span class="fl">1993</span>, <span class="fl">1999</span>, <span class="fl">2004</span>, <span class="fl">2009</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">avoca_times</span> <span class="op">&lt;-</span> <span class="va">years</span><span class="op">[</span><span class="va">avoca_surveys</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">avoca_x</span> <span class="op">&lt;-</span> <span class="fu"><a href="defineTrajectories.html">defineTrajectories</a></span><span class="op">(</span>d <span class="op">=</span> <span class="va">avoca_D_man</span>,  </span></span>
<span class="r-in"><span>                              sites <span class="op">=</span> <span class="va">avoca_sites</span>, </span></span>
<span class="r-in"><span>                              times <span class="op">=</span> <span class="va">avoca_times</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Raw output with asymmetric convergence test (default)</span></span></span>
<span class="r-in"><span><span class="fu">trajectoryConvergencePlot</span><span class="op">(</span><span class="va">avoca_x</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="trajectoryConvergencePlot-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#More refined output with both type of tests and only plotting significant </span></span></span>
<span class="r-in"><span><span class="co">#test results (p-value &lt; 0.05)</span></span></span>
<span class="r-in"><span><span class="fu">trajectoryConvergencePlot</span><span class="op">(</span><span class="va">avoca_x</span>,</span></span>
<span class="r-in"><span>                          type <span class="op">=</span> <span class="st">"both"</span>,</span></span>
<span class="r-in"><span>                          alpha.filter <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="trajectoryConvergencePlot-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Much more refined output with nicer colors, bigger half arrows, </span></span></span>
<span class="r-in"><span><span class="co">#personalized trajectory names, controlling the size of circles representing </span></span></span>
<span class="r-in"><span><span class="co">#trajectories and border customization.</span></span></span>
<span class="r-in"><span><span class="fu">trajectoryConvergencePlot</span><span class="op">(</span><span class="va">avoca_x</span>,type <span class="op">=</span> <span class="st">"both"</span>,alpha.filter <span class="op">=</span> <span class="fl">0.05</span>,</span></span>
<span class="r-in"><span>                          half.arrows.size <span class="op">=</span> <span class="fl">1.5</span>, </span></span>
<span class="r-in"><span>                          conv.color <span class="op">=</span> <span class="st">"orangered"</span>,</span></span>
<span class="r-in"><span>                          div.color <span class="op">=</span> <span class="st">"dodgerblue"</span>,</span></span>
<span class="r-in"><span>                          radius <span class="op">=</span> <span class="fl">1.2</span>, </span></span>
<span class="r-in"><span>                          traj.colors <span class="op">=</span> <span class="st">"black"</span>,border <span class="op">=</span> <span class="st">"white"</span>,lwd <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>                          traj.names <span class="op">=</span> <span class="va">LETTERS</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">]</span>,traj.names.colors <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="trajectoryConvergencePlot-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co">#RTMA version.</span></span></span>
<span class="r-in"><span><span class="va">avoca_RTMA</span> <span class="op">&lt;-</span> <span class="fu"><a href="trajectoryRMA.html">trajectoryRMA</a></span><span class="op">(</span><span class="va">avoca_x</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">trajectoryConvergencePlot</span><span class="op">(</span><span class="va">avoca_RTMA</span>,</span></span>
<span class="r-in"><span>                          half.arrows.size <span class="op">=</span> <span class="fl">1.5</span>, </span></span>
<span class="r-in"><span>                          conv.color <span class="op">=</span> <span class="st">"orangered"</span>,</span></span>
<span class="r-in"><span>                          div.color <span class="op">=</span> <span class="st">"dodgerblue"</span>,</span></span>
<span class="r-in"><span>                          radius <span class="op">=</span> <span class="fl">1.2</span>, </span></span>
<span class="r-in"><span>                          traj.colors <span class="op">=</span> <span class="st">"black"</span>,border <span class="op">=</span> <span class="st">"white"</span>,lwd <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>                          traj.names <span class="op">=</span> <span class="va">LETTERS</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">]</span>,traj.names.colors <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="trajectoryConvergencePlot-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span>                          </span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Miquel De Cáceres, Nicolas Djeghri, Anthony Sturbois.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

